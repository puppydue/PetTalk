{% extends "base.html" %}
{% block title %}ÄÄƒng kÃ½ tham gia sá»± kiá»‡n{% endblock %}
{% block content %}
<div class="confirm-container">
  <h2> XÃ¡c nháº­n Ä‘Äƒng kÃ½ sá»± kiá»‡n</h2>

  <div class="event-info">
    <h3>{{ event.title }}</h3>
    {% if event.image %}
      <img src="{{ event.image.url }}" alt="{{ event.title }}">
    {% endif %}
    <p><strong>ğŸ“… Thá»i gian:</strong> {{ event.date|date:"d/m/Y H:i" }}</p>
    <p><strong>ğŸ“ Äá»‹a Ä‘iá»ƒm:</strong> {{ event.location }}</p>
    <p><strong>ğŸ“– MÃ´ táº£:</strong> {{ event.description }}</p>
  </div>

  <form method="POST">
    {% csrf_token %}
    <div class="buttons">
      <button type="submit" class="confirm-btn"> XÃ¡c nháº­n Ä‘Äƒng kÃ½</button>
      <a href="{% url 'danh_sach_su_kien' %}" class="cancel-btn"> Há»§y</a>
    </div>
  </form>

{% if show_success %}
  <div id="flash-message" class="flash-message success">
     Báº¡n Ä‘Ã£ Ä‘Äƒng kÃ½ tham gia sá»± kiá»‡n thÃ nh cÃ´ng!
  </div>

  <script>
    // Tá»± áº©n thÃ´ng bÃ¡o sau 3.5 giÃ¢y
    setTimeout(() => {
      const msg = document.getElementById("flash-message");
      if (msg) msg.style.display = "none";
      // Sau Ä‘Ã³ tá»± Ä‘á»™ng chuyá»ƒn vá» danh sÃ¡ch sá»± kiá»‡n
      window.location.href = "{% url 'danh_sach_su_kien' %}";
    }, 3500);
  </script>

  <style>
    .flash-message {
      position: fixed;
      top: 30px;
      right: 30px;
      background: #4caf50;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease;
      z-index: 1000;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
{% endif %}

</div>

<style>
.confirm-container {
  max-width: 600px;
  margin: 40px auto;
  background: #fff8e1;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.event-info img {
  width: 100%;
  max-height: 250px;
  object-fit: cover;
  border-radius: 10px;
  margin-bottom: 15px;
}
.buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}
.confirm-btn {
  background: #003459;
  color: white;
  padding: 10px 16px;
  border-radius: 8px;
  text-decoration: none;
  border: none;
  cursor: pointer;
}
.cancel-btn {
  background: #ccc;
  color: black;
  padding: 10px 16px;
  border-radius: 8px;
  text-decoration: none;
}
.confirm-btn:hover { background: #00509e; }
.cancel-btn:hover { background: #b5b5b5; }
</style>
{% endblock %}

