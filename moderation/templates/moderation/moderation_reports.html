{% extends "basemode.html" %}
{% load static %}

{% block title %}B√°o c√°o vi ph·∫°m ‚Ä¢ Moderator Center{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/basemode.css' %}">
{% endblock %}

{% block content %}
<h2>üìã B√°o c√°o vi ph·∫°m</h2>

<!-- Tabs -->
<div class="tab-wrapper">
  <a href="{% url 'moderation_reports' %}" class="tab-btn active">B√°o c√°o vi ph·∫°m</a>
  <a href="{% url 'moderation_events' %}" class="tab-btn">ƒêƒÉng k√Ω s·ª± ki·ªán</a>
</div>

<!-- B·ªô l·ªçc -->
<div class="filter-card">
  <span class="filter-title">L·ªçc theo:</span>
  <a href="#" class="filter-btn active">T·∫•t c·∫£</a>
  <a href="#" class="filter-btn">B√†i vi·∫øt</a>
  <a href="#" class="filter-btn">B√¨nh lu·∫≠n</a>
</div>

<!-- B·∫£ng danh s√°ch -->
<table class="styled-table table-reports">
  <thead>
    <tr>
      <th>#</th>
      <th>Lo·∫°i n·ªôi dung</th>
      <th>Ng∆∞·ªùi b√°o c√°o</th>
      <th class="reason-column">L√Ω do</th>
      <th>Ng√†y g·ª≠i</th>
      <th>Tr·∫°ng th√°i</th>
      <th>H√†nh ƒë·ªông</th>
    </tr>
  </thead>
  <tbody>
    {% for r in reports_post %}
    <tr data-type="post" data-id="{{ r.rppost_id }}">
      <td>#{{ r.rppost_id }}</td>
      <td>B√†i vi·∫øt</td>
      <td>{{ r.username.username }}</td>
      <td class="reason-column">{{ r.reason }}</td>
      <td>{{ r.created_at|date:"d/m/Y" }}</td>
      <td>
        <span class="status-badge status-{{ r.status|default:'pending' }}">{{ r.status|capfirst }}</span>
      </td>
      <td><button class="btn-check" onclick="openModal('{{ r.rppost_id }}')">Ki·ªÉm tra</button></td>
    </tr>
    {% endfor %}
    {% for r in reports_comment %}
    <tr data-type="comment" data-id="{{ r.rpcmt_id }}">
      <td>#{{ r.rpcmt_id }}</td>
      <td>B√¨nh lu·∫≠n</td>
      <td>{{ r.username.username }}</td>
      <td class="reason-column">{{ r.reason }}</td>
      <td>{{ r.created_at|date:"d/m/Y" }}</td>
      <td>
        <span class="status-badge status-{{ r.status|default:'pending' }}">{{ r.status|capfirst }}</span>
      </td>
      <td><button class="btn-check" onclick="openModal('{{ r.rpcmt_id }}')">Ki·ªÉm tra</button></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Modal (popup chi ti·∫øt b√°o c√°o) -->
<div class="modal-overlay" id="modal" style="display: none;">
  <div class="modal-box">
    <div class="modal-header">
      <h3>Chi ti·∫øt b√°o c√°o</h3>
      <span class="modal-close" onclick="closeModal()">√ó</span>
    </div>
    <p><strong>Lo·∫°i:</strong> <span id="modal-type">B√†i vi·∫øt</span></p>
    <p><strong>Ng∆∞·ªùi b√°o c√°o:</strong> <span id="modal-user">hoan</span></p>
    <p><strong>L√Ω do:</strong> <span id="modal-reason">N·ªôi dung vi ph·∫°m quy t·∫Øc c·ªông ƒë·ªìng</span></p>
    <p><strong>Ng√†y g·ª≠i:</strong> <span id="modal-date">02/11/2025</span></p>
    <p><strong>Tr·∫°ng th√°i:</strong> <span class="status-badge status-pending" id="modal-status">Pending</span></p>

    <div class="modal-footer">
      <button class="btn-approve">Duy·ªát</button>
      <button class="btn-reject">T·ª´ ch·ªëi</button>
      <button class="btn-close" onclick="closeModal()">ƒê√≥ng</button>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function openModal(id) {
  document.getElementById('modal').style.display = 'flex';
  // (C√≥ th·ªÉ th√™m AJAX load chi ti·∫øt ·ªü ƒë√¢y n·∫øu mu·ªën)
}
function closeModal() {
  document.getElementById('modal').style.display = 'none';
}
</script>
{% endblock %}
